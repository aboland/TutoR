---
title: "Visualisation"
author: "Aidan Boland"
date: "28/5/2018"
output:
  github_document:
    html_preview: false
  ioslides_presentation:
    css: mystyle.css
    logo: images/clavislogo.png
    smaller: true
    widescreen: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.align='center')
library(ggplot2)
```

## ggplot2

<br>
<br>

- For creating plots of data we will use the [ggplot2](http://ggplot2.tidyverse.org/) package.
- We will follow the [data visualisation](http://r4ds.had.co.nz/data-visualisation.html) chapter from the [R for Data Science](http://r4ds.had.co.nz/index.html) book.  

<br>


# Scatterplots


```{r mpg_pretext, echo = FALSE, results='asis'}
fmt <- rmarkdown::default_output_format(knitr::current_input())$name
if (fmt == "ioslides_presentation") {
  
  cat("## mpg Data\n")
  
  cat("- `mpg` contains observations collected by the US Environment Protection Agency on 38 models of car\n")
  
  cat("<br>\n
      <center>\n")
}
```

```{r mpg, echo = FALSE}
# fmt <- rmarkdown::default_output_format(knitr::current_input())$name
if (fmt == "ioslides_presentation") {
  return(mpg)
}
```

```{r mpg_posttext, echo = FALSE, results='asis'}
if (fmt == "ioslides_presentation") {
  cat("</center>\n")
  cat("<br>\n")
}
```


## mpg Data

- `mpg` contains observations collected by the US Environment Protection Agency on 38 models of car

<br>

- We will begin with the relationship between engine size (`displ`) and fuel efficiency (`hwy`)
- What would you expect the reationship to be?  

<br>



## Basic Scatterplot

```{r plot1}
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))
```
  
<br>


## Plot Template

```{r plot_template, eval = FALSE}
ggplot(data = <DATA>) + 
  <GEOM_FUNCTION>(mapping = aes(<MAPPINGS>))
```

- The ggplot2 template takes the above form
- The data (`<DATA>`) is passed as part of the ggplot function
- The type of graph is defined by the function which follows (`<GEOM_FUNCTION>`)
    - We have seen previously the `geom_point` function which creates a scatterplot
    - There are different functions which create other type of graphs such as a bar chart `geom_bar`
- The `<MAPPINGS>` component defines which variables are plotted and can control other parts of the graph like the colour, size, etc...  

<br>

## Scatterplot with Colour

```{r plot_colour}
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, colour = class))
```
  
<br>

## Scatterplot with Shade

```{r plot_shade}
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, alpha = class))
```
  
<br>

## Scatterplot with Shape

```{r plot_shape, warning=FALSE}
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, shape = class))
```
  
<br>



# Other Plots

## Different geom Types

- `geom_point` scatterplot
- `geom_bar` barplot
- `geom_histogram` histogram  
<br>

## Diamonds data

- Diamonds is a dataset containing the prices and other attributes of almost 54,000 diamonds.

<br>
<center>
```{r diamonds, echo = FALSE}
if (fmt == "ioslides_presentation") {
  return(diamonds)
}
```
</center>  
<br>

## Barplot

```{r bar1}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut))
```

## Barplot - Category by colour

```{r bar2}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = cut))
```

## Barplot - Fill using another variable

```{r bar3}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity))
```

## Barplot - Fill using another variable

```{r bar4}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "fill")
```

## Barplot - Fill using another variable

```{r bar5}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "dodge")
```
  
## Histogram

```{r hist1}
ggplot(diamonds, aes(carat)) +
  geom_histogram(binwidth = 0.01)
```

## Histogram

```{r hist2}
ggplot(diamonds, aes(price, fill = cut)) +
  geom_histogram(binwidth = 500)
```







